<div class="container">
    <div class="miembros">

        <app-interesado-filter (propagar)="filtrarInteresados($event)"></app-interesado-filter>
        <div class="buttons">

            <button mat-mini-fab color="primary" class="" id="filter" (click)="backTo()"
                matTooltip="Volver al elemento anterior.">
                <mat-icon>input</mat-icon>
            </button>
        </div>
        <section id="tabla" class="tabla">

            <div class="paginator">
                <mat-paginator [length]="totalElements" [pageSizeOptions]="elementsPage" showFirstLastButtons>
                </mat-paginator>
            </div>

            <table class="mat-elevation-z8" mat-table [dataSource]="dataSource" matSort>

                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
                    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                </ng-container>
                <ng-container matColumnDef="tipoDocumento">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Tipo documento</th>
                    <td mat-cell *matCellDef="let element"> {{element.interesadoDocumentoTipo?.descripcion}} </td>
                </ng-container>

                <div class="form-column"></div>
                <ng-container matColumnDef="documentoIdentidad">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Documento identidad</th>
                    <td mat-cell *matCellDef="let element"> {{element.documentoIdentidad}} </td>
                </ng-container>
                <ng-container matColumnDef="primerNombre">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
                    <td mat-cell *matCellDef="let element"> {{element.primerNombre}} </td>
                </ng-container>

                <ng-container matColumnDef="segundoNombre">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>2º nombre</th>
                    <td mat-cell *matCellDef="let element"> {{element.segundoNombre}} </td>
                </ng-container>

                <ng-container matColumnDef="primerApellido">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>1º apellido</th>
                    <td mat-cell *matCellDef="let element"> {{element.primerApellido}} </td>
                </ng-container>
                <ng-container matColumnDef="segundoApellido">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>2º apellido</th>
                    <td mat-cell *matCellDef="let element"> {{element.segundoApellido}} </td>
                </ng-container>
                <ng-container matColumnDef="sexoTipo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Sexo</th>
                    <td mat-cell *matCellDef="let element"> {{element.sexoTipo?.descripcion}} </td>
                </ng-container>
                <ng-container matColumnDef="grupoEtnicoTipo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Grupo étnico</th>
                    <td mat-cell *matCellDef="let element"> {{element.grupoEtnicoTipo?.descripcion }}</td>
                </ng-container>
                <ng-container matColumnDef="razonSocial">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Razón social</th>
                    <td mat-cell *matCellDef="let element"> {{element.razonSocial}} </td>
                </ng-container>
                <ng-container matColumnDef="nombre">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre RS</th>
                    <td mat-cell *matCellDef="let element">{{element.nombre}}</td>
                </ng-container>

                <ng-container matColumnDef="fechaCaptura">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha captura</th>
                    <td mat-cell *matCellDef="let element"> {{element.fechaCaptura | date: 'd-M-yyyy'}} </td>
                </ng-container>
                <ng-container matColumnDef="fechaUltimaModificacion">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Últimamodificación</th>
                    <td mat-cell *matCellDef="let element"> {{element.fechaUltimaModificacion | date: 'd-M-yyyy'}} </td>
                </ng-container>
                <ng-container matColumnDef="autorUltimaModificacion">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Autor </th>
                    <td mat-cell *matCellDef="let element"> {{element.autorUltimaModificacion}} </td>
                </ng-container>

                <ng-container matColumnDef="acciones">
                    <th *matHeaderCellDef mat-header-cell></th>
                    <td *matCellDef="let interesado; let i = index" [id]="'actions'+ (i + 1)" mat-cell>

                        <button mat-mini-fab color="primary" class="" (click)="addMiembro(interesado, agrupacion)"
                            matTooltip="Incluir como miembro el grupo">
                            <mat-icon>double_arrow</mat-icon>
                        </button>

                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </section>

    </div>
    <div class="agrupacion">
        <div class="header-container">
            <h2 class="title">AgrupaciónId:{{agrupacion.id}}</h2>
            <h4 class="title">Nombre:{{agrupacion.nombre}}</h4>
        </div>

        <div class="miembros-de-agrupacion">
            <div class="list" role="list">

                <div *ngFor="let miembro of miembros" role="listitem" class="listitem">
                    <p>{{miembro.primerNombre}} {{miembro.primerApellido}} {{miembro.segundoApellido}}</p>

                    <button mat-mini-fab color="primary" class="list-button"
                        (click)="quitarMiembro(miembro, agrupacion)" matTooltip="Quitar miembro">
                        <mat-icon>close</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>